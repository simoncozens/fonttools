

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>fontTools.misc.psCharStrings &mdash; fontTools Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> fontTools
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../afmLib.html">afmLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agl.html">agl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cffLib/index.html">cffLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../colorLib/index.html">colorLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cu2qu/index.html">cu2qu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../designspaceLib/index.html">designspaceLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../encodings/index.html">encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../feaLib/index.html">feaLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../merge.html">merge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc/index.html">misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mtiLib.html">mtiLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../otlLib/index.html">otlLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pens/index.html">pens</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../subset/index.html">subset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../svgLib/index.html">svgLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../t1Lib.html">t1Lib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ttLib/index.html">ttLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ttx.html">ttx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ufoLib/index.html">ufoLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../unicode.html">unicode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../unicodedata/index.html">unicodedata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../varLib/index.html">varLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../voltLib.html">voltLib</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">fontTools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>fontTools.misc.psCharStrings</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for fontTools.misc.psCharStrings</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;psCharStrings.py -- module implementing various kinds of CharStrings:</span>
<span class="sd">CFF dictionary data and Type1/Type2 CharStrings.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">fontTools.misc.py23</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">fontTools.misc.fixedTools</span> <span class="k">import</span> <span class="p">(</span>
	<span class="n">fixedToFloat</span><span class="p">,</span> <span class="n">floatToFixed</span><span class="p">,</span> <span class="n">floatToFixedToStr</span><span class="p">,</span> <span class="n">strToFixedToFloat</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">fontTools.pens.boundsPen</span> <span class="k">import</span> <span class="n">BoundsPen</span>
<span class="kn">import</span> <span class="nn">struct</span>
<span class="kn">import</span> <span class="nn">logging</span>


<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="read_operator"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.read_operator">[docs]</a><span class="k">def</span> <span class="nf">read_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">b0</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>
		<span class="n">op</span> <span class="o">=</span> <span class="p">(</span><span class="n">b0</span><span class="p">,</span> <span class="n">byteord</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span>
		<span class="n">index</span> <span class="o">=</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">op</span> <span class="o">=</span> <span class="n">b0</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">operator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operators</span><span class="p">[</span><span class="n">op</span><span class="p">]</span>
	<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
		<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">index</span>
	<span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_operator</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">value</span><span class="p">,</span> <span class="n">index</span></div>

<div class="viewcode-block" id="read_byte"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.read_byte">[docs]</a><span class="k">def</span> <span class="nf">read_byte</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
	<span class="k">return</span> <span class="n">b0</span> <span class="o">-</span> <span class="mi">139</span><span class="p">,</span> <span class="n">index</span></div>

<div class="viewcode-block" id="read_smallInt1"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.read_smallInt1">[docs]</a><span class="k">def</span> <span class="nf">read_smallInt1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
	<span class="n">b1</span> <span class="o">=</span> <span class="n">byteord</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">b0</span><span class="o">-</span><span class="mi">247</span><span class="p">)</span><span class="o">*</span><span class="mi">256</span> <span class="o">+</span> <span class="n">b1</span> <span class="o">+</span> <span class="mi">108</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span></div>

<div class="viewcode-block" id="read_smallInt2"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.read_smallInt2">[docs]</a><span class="k">def</span> <span class="nf">read_smallInt2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
	<span class="n">b1</span> <span class="o">=</span> <span class="n">byteord</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
	<span class="k">return</span> <span class="o">-</span><span class="p">(</span><span class="n">b0</span><span class="o">-</span><span class="mi">251</span><span class="p">)</span><span class="o">*</span><span class="mi">256</span> <span class="o">-</span> <span class="n">b1</span> <span class="o">-</span> <span class="mi">108</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span></div>

<div class="viewcode-block" id="read_shortInt"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.read_shortInt">[docs]</a><span class="k">def</span> <span class="nf">read_shortInt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
	<span class="n">value</span><span class="p">,</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&gt;h&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">:</span><span class="n">index</span><span class="o">+</span><span class="mi">2</span><span class="p">])</span>
	<span class="k">return</span> <span class="n">value</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">2</span></div>

<div class="viewcode-block" id="read_longInt"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.read_longInt">[docs]</a><span class="k">def</span> <span class="nf">read_longInt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
	<span class="n">value</span><span class="p">,</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&gt;l&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">:</span><span class="n">index</span><span class="o">+</span><span class="mi">4</span><span class="p">])</span>
	<span class="k">return</span> <span class="n">value</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">4</span></div>

<div class="viewcode-block" id="read_fixed1616"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.read_fixed1616">[docs]</a><span class="k">def</span> <span class="nf">read_fixed1616</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
	<span class="n">value</span><span class="p">,</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&gt;l&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">:</span><span class="n">index</span><span class="o">+</span><span class="mi">4</span><span class="p">])</span>
	<span class="k">return</span> <span class="n">fixedToFloat</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">precisionBits</span><span class="o">=</span><span class="mi">16</span><span class="p">),</span> <span class="n">index</span><span class="o">+</span><span class="mi">4</span></div>

<div class="viewcode-block" id="read_reserved"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.read_reserved">[docs]</a><span class="k">def</span> <span class="nf">read_reserved</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
	<span class="k">assert</span> <span class="ne">NotImplementedError</span>
	<span class="k">return</span> <span class="bp">NotImplemented</span><span class="p">,</span> <span class="n">index</span></div>

<div class="viewcode-block" id="read_realNumber"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.read_realNumber">[docs]</a><span class="k">def</span> <span class="nf">read_realNumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
	<span class="n">number</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
	<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
		<span class="n">b</span> <span class="o">=</span> <span class="n">byteord</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
		<span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
		<span class="n">nibble0</span> <span class="o">=</span> <span class="p">(</span><span class="n">b</span> <span class="o">&amp;</span> <span class="mh">0xf0</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span>
		<span class="n">nibble1</span> <span class="o">=</span> <span class="n">b</span> <span class="o">&amp;</span> <span class="mh">0x0f</span>
		<span class="k">if</span> <span class="n">nibble0</span> <span class="o">==</span> <span class="mh">0xf</span><span class="p">:</span>
			<span class="k">break</span>
		<span class="n">number</span> <span class="o">=</span> <span class="n">number</span> <span class="o">+</span> <span class="n">realNibbles</span><span class="p">[</span><span class="n">nibble0</span><span class="p">]</span>
		<span class="k">if</span> <span class="n">nibble1</span> <span class="o">==</span> <span class="mh">0xf</span><span class="p">:</span>
			<span class="k">break</span>
		<span class="n">number</span> <span class="o">=</span> <span class="n">number</span> <span class="o">+</span> <span class="n">realNibbles</span><span class="p">[</span><span class="n">nibble1</span><span class="p">]</span>
	<span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="p">),</span> <span class="n">index</span></div>


<span class="n">t1OperandEncoding</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="mi">256</span>
<span class="n">t1OperandEncoding</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="p">[</span><span class="n">read_operator</span><span class="p">]</span>
<span class="n">t1OperandEncoding</span><span class="p">[</span><span class="mi">32</span><span class="p">:</span><span class="mi">247</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">247</span> <span class="o">-</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="p">[</span><span class="n">read_byte</span><span class="p">]</span>
<span class="n">t1OperandEncoding</span><span class="p">[</span><span class="mi">247</span><span class="p">:</span><span class="mi">251</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">251</span> <span class="o">-</span> <span class="mi">247</span><span class="p">)</span> <span class="o">*</span> <span class="p">[</span><span class="n">read_smallInt1</span><span class="p">]</span>
<span class="n">t1OperandEncoding</span><span class="p">[</span><span class="mi">251</span><span class="p">:</span><span class="mi">255</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span> <span class="o">-</span> <span class="mi">251</span><span class="p">)</span> <span class="o">*</span> <span class="p">[</span><span class="n">read_smallInt2</span><span class="p">]</span>
<span class="n">t1OperandEncoding</span><span class="p">[</span><span class="mi">255</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_longInt</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">t1OperandEncoding</span><span class="p">)</span> <span class="o">==</span> <span class="mi">256</span>

<span class="n">t2OperandEncoding</span> <span class="o">=</span> <span class="n">t1OperandEncoding</span><span class="p">[:]</span>
<span class="n">t2OperandEncoding</span><span class="p">[</span><span class="mi">28</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_shortInt</span>
<span class="n">t2OperandEncoding</span><span class="p">[</span><span class="mi">255</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_fixed1616</span>

<span class="n">cffDictOperandEncoding</span> <span class="o">=</span> <span class="n">t2OperandEncoding</span><span class="p">[:]</span>
<span class="n">cffDictOperandEncoding</span><span class="p">[</span><span class="mi">29</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_longInt</span>
<span class="n">cffDictOperandEncoding</span><span class="p">[</span><span class="mi">30</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_realNumber</span>
<span class="n">cffDictOperandEncoding</span><span class="p">[</span><span class="mi">255</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_reserved</span>


<span class="n">realNibbles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">,</span> <span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="s1">&#39;9&#39;</span><span class="p">,</span>
		<span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;E-&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">]</span>
<span class="n">realNibblesDict</span> <span class="o">=</span> <span class="p">{</span><span class="n">v</span><span class="p">:</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">realNibbles</span><span class="p">)}</span>

<span class="n">maxOpStack</span> <span class="o">=</span> <span class="mi">193</span>


<div class="viewcode-block" id="buildOperatorDict"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.buildOperatorDict">[docs]</a><span class="k">def</span> <span class="nf">buildOperatorDict</span><span class="p">(</span><span class="n">operatorList</span><span class="p">):</span>
	<span class="n">oper</span> <span class="o">=</span> <span class="p">{}</span>
	<span class="n">opc</span> <span class="o">=</span> <span class="p">{}</span>
	<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">operatorList</span><span class="p">:</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
			<span class="n">oper</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">oper</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">):</span>
			<span class="n">opc</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">opc</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">],)</span>
	<span class="k">return</span> <span class="n">oper</span><span class="p">,</span> <span class="n">opc</span></div>


<span class="n">t2Operators</span> <span class="o">=</span> <span class="p">[</span>
<span class="c1">#	opcode		name</span>
	<span class="p">(</span><span class="mi">1</span><span class="p">,</span>		<span class="s1">&#39;hstem&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">3</span><span class="p">,</span>		<span class="s1">&#39;vstem&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">4</span><span class="p">,</span>		<span class="s1">&#39;vmoveto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">5</span><span class="p">,</span>		<span class="s1">&#39;rlineto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">6</span><span class="p">,</span>		<span class="s1">&#39;hlineto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">7</span><span class="p">,</span>		<span class="s1">&#39;vlineto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">8</span><span class="p">,</span>		<span class="s1">&#39;rrcurveto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">10</span><span class="p">,</span>		<span class="s1">&#39;callsubr&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">11</span><span class="p">,</span>		<span class="s1">&#39;return&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">14</span><span class="p">,</span>		<span class="s1">&#39;endchar&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">15</span><span class="p">,</span>		<span class="s1">&#39;vsindex&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">16</span><span class="p">,</span>		<span class="s1">&#39;blend&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">18</span><span class="p">,</span>		<span class="s1">&#39;hstemhm&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">19</span><span class="p">,</span>		<span class="s1">&#39;hintmask&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">20</span><span class="p">,</span>		<span class="s1">&#39;cntrmask&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">21</span><span class="p">,</span>		<span class="s1">&#39;rmoveto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">22</span><span class="p">,</span>		<span class="s1">&#39;hmoveto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">23</span><span class="p">,</span>		<span class="s1">&#39;vstemhm&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">24</span><span class="p">,</span>		<span class="s1">&#39;rcurveline&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">25</span><span class="p">,</span>		<span class="s1">&#39;rlinecurve&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">26</span><span class="p">,</span>		<span class="s1">&#39;vvcurveto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">27</span><span class="p">,</span>		<span class="s1">&#39;hhcurveto&#39;</span><span class="p">),</span>
<span class="c1">#	(28,		&#39;shortint&#39;),  # not really an operator</span>
	<span class="p">(</span><span class="mi">29</span><span class="p">,</span>		<span class="s1">&#39;callgsubr&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">30</span><span class="p">,</span>		<span class="s1">&#39;vhcurveto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">31</span><span class="p">,</span>		<span class="s1">&#39;hvcurveto&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>	<span class="s1">&#39;ignore&#39;</span><span class="p">),</span>	<span class="c1"># dotsection. Yes, there a few very early OTF/CFF</span>
							<span class="c1"># fonts with this deprecated operator. Just ignore it.</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>	<span class="s1">&#39;and&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>	<span class="s1">&#39;or&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>	<span class="s1">&#39;not&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>	<span class="s1">&#39;store&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>	<span class="s1">&#39;abs&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>	<span class="s1">&#39;add&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>	<span class="s1">&#39;sub&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>	<span class="s1">&#39;div&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span>	<span class="s1">&#39;load&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>	<span class="s1">&#39;neg&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>	<span class="s1">&#39;eq&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span>	<span class="s1">&#39;drop&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>	<span class="s1">&#39;put&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>	<span class="s1">&#39;get&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span>	<span class="s1">&#39;ifelse&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">23</span><span class="p">),</span>	<span class="s1">&#39;random&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span>	<span class="s1">&#39;mul&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">26</span><span class="p">),</span>	<span class="s1">&#39;sqrt&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">27</span><span class="p">),</span>	<span class="s1">&#39;dup&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">28</span><span class="p">),</span>	<span class="s1">&#39;exch&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">29</span><span class="p">),</span>	<span class="s1">&#39;index&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>	<span class="s1">&#39;roll&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">34</span><span class="p">),</span>	<span class="s1">&#39;hflex&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">35</span><span class="p">),</span>	<span class="s1">&#39;flex&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">36</span><span class="p">),</span>	<span class="s1">&#39;hflex1&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">37</span><span class="p">),</span>	<span class="s1">&#39;flex1&#39;</span><span class="p">),</span>
<span class="p">]</span>

<div class="viewcode-block" id="getIntEncoder"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.getIntEncoder">[docs]</a><span class="k">def</span> <span class="nf">getIntEncoder</span><span class="p">(</span><span class="nb">format</span><span class="p">):</span>
	<span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;cff&quot;</span><span class="p">:</span>
		<span class="n">fourByteOp</span> <span class="o">=</span> <span class="n">bytechr</span><span class="p">(</span><span class="mi">29</span><span class="p">)</span>
	<span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;t1&quot;</span><span class="p">:</span>
		<span class="n">fourByteOp</span> <span class="o">=</span> <span class="n">bytechr</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">assert</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;t2&quot;</span>
		<span class="n">fourByteOp</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="k">def</span> <span class="nf">encodeInt</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">fourByteOp</span><span class="o">=</span><span class="n">fourByteOp</span><span class="p">,</span> <span class="n">bytechr</span><span class="o">=</span><span class="n">bytechr</span><span class="p">,</span>
			<span class="n">pack</span><span class="o">=</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">,</span> <span class="n">unpack</span><span class="o">=</span><span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">):</span>
		<span class="k">if</span> <span class="o">-</span><span class="mi">107</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">107</span><span class="p">:</span>
			<span class="n">code</span> <span class="o">=</span> <span class="n">bytechr</span><span class="p">(</span><span class="n">value</span> <span class="o">+</span> <span class="mi">139</span><span class="p">)</span>
		<span class="k">elif</span> <span class="mi">108</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">1131</span><span class="p">:</span>
			<span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="mi">108</span>
			<span class="n">code</span> <span class="o">=</span> <span class="n">bytechr</span><span class="p">((</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="mi">247</span><span class="p">)</span> <span class="o">+</span> <span class="n">bytechr</span><span class="p">(</span><span class="n">value</span> <span class="o">&amp;</span> <span class="mh">0xFF</span><span class="p">)</span>
		<span class="k">elif</span> <span class="o">-</span><span class="mi">1131</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mi">108</span><span class="p">:</span>
			<span class="n">value</span> <span class="o">=</span> <span class="o">-</span><span class="n">value</span> <span class="o">-</span> <span class="mi">108</span>
			<span class="n">code</span> <span class="o">=</span> <span class="n">bytechr</span><span class="p">((</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="mi">251</span><span class="p">)</span> <span class="o">+</span> <span class="n">bytechr</span><span class="p">(</span><span class="n">value</span> <span class="o">&amp;</span> <span class="mh">0xFF</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">fourByteOp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="c1"># T2 only supports 2 byte ints</span>
			<span class="k">if</span> <span class="o">-</span><span class="mi">32768</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">32767</span><span class="p">:</span>
				<span class="n">code</span> <span class="o">=</span> <span class="n">bytechr</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span> <span class="o">+</span> <span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;h&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># Backwards compatible hack: due to a previous bug in FontTools,</span>
				<span class="c1"># 16.16 fixed numbers were written out as 4-byte ints. When</span>
				<span class="c1"># these numbers were small, they were wrongly written back as</span>
				<span class="c1"># small ints instead of 4-byte ints, breaking round-tripping.</span>
				<span class="c1"># This here workaround doesn&#39;t do it any better, since we can&#39;t</span>
				<span class="c1"># distinguish anymore between small ints that were supposed to</span>
				<span class="c1"># be small fixed numbers and small ints that were just small</span>
				<span class="c1"># ints. Hence the warning.</span>
				<span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;4-byte T2 number got passed to the &quot;</span>
					<span class="s2">&quot;IntType handler. This should happen only when reading in &quot;</span>
					<span class="s2">&quot;old XML files.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="n">code</span> <span class="o">=</span> <span class="n">bytechr</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="o">+</span> <span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;l&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">code</span> <span class="o">=</span> <span class="n">fourByteOp</span> <span class="o">+</span> <span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;l&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">code</span>

	<span class="k">return</span> <span class="n">encodeInt</span></div>


<span class="n">encodeIntCFF</span> <span class="o">=</span> <span class="n">getIntEncoder</span><span class="p">(</span><span class="s2">&quot;cff&quot;</span><span class="p">)</span>
<span class="n">encodeIntT1</span> <span class="o">=</span> <span class="n">getIntEncoder</span><span class="p">(</span><span class="s2">&quot;t1&quot;</span><span class="p">)</span>
<span class="n">encodeIntT2</span> <span class="o">=</span> <span class="n">getIntEncoder</span><span class="p">(</span><span class="s2">&quot;t2&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="encodeFixed"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.encodeFixed">[docs]</a><span class="k">def</span> <span class="nf">encodeFixed</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">pack</span><span class="o">=</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;For T2 only&quot;&quot;&quot;</span>
	<span class="n">value</span> <span class="o">=</span> <span class="n">floatToFixed</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">precisionBits</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">value</span> <span class="o">&amp;</span> <span class="mh">0xFFFF</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># check if the fractional part is zero</span>
		<span class="k">return</span> <span class="n">encodeIntT2</span><span class="p">(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">)</span>  <span class="c1"># encode only the integer part</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\xff</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;l&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>  <span class="c1"># encode the entire fixed point value</span></div>


<span class="n">realZeroBytes</span> <span class="o">=</span> <span class="n">bytechr</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="o">+</span> <span class="n">bytechr</span><span class="p">(</span><span class="mh">0xf</span><span class="p">)</span>

<div class="viewcode-block" id="encodeFloat"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.encodeFloat">[docs]</a><span class="k">def</span> <span class="nf">encodeFloat</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
	<span class="c1"># For CFF only, used in cffLib</span>
	<span class="k">if</span> <span class="n">f</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span> <span class="c1"># 0.0 == +0.0 == -0.0</span>
		<span class="k">return</span> <span class="n">realZeroBytes</span>
	<span class="c1"># Note: 14 decimal digits seems to be the limitation for CFF real numbers</span>
	<span class="c1"># in macOS. However, we use 8 here to match the implementation of AFDKO.</span>
	<span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%.8G</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">f</span>
	<span class="k">if</span> <span class="n">s</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;0.&quot;</span><span class="p">:</span>
		<span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
	<span class="k">elif</span> <span class="n">s</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;-0.&quot;</span><span class="p">:</span>
		<span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
	<span class="n">nibbles</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">while</span> <span class="n">s</span><span class="p">:</span>
		<span class="n">c</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
		<span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
		<span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="s2">&quot;E&quot;</span><span class="p">:</span>
			<span class="n">c2</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
			<span class="k">if</span> <span class="n">c2</span> <span class="o">==</span> <span class="s2">&quot;-&quot;</span><span class="p">:</span>
				<span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
				<span class="n">c</span> <span class="o">=</span> <span class="s2">&quot;E-&quot;</span>
			<span class="k">elif</span> <span class="n">c2</span> <span class="o">==</span> <span class="s2">&quot;+&quot;</span><span class="p">:</span>
				<span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
		<span class="n">nibbles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">realNibblesDict</span><span class="p">[</span><span class="n">c</span><span class="p">])</span>
	<span class="n">nibbles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mh">0xf</span><span class="p">)</span>
	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">nibbles</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">:</span>
		<span class="n">nibbles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mh">0xf</span><span class="p">)</span>
	<span class="n">d</span> <span class="o">=</span> <span class="n">bytechr</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nibbles</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
		<span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="n">bytechr</span><span class="p">(</span><span class="n">nibbles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">|</span> <span class="n">nibbles</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
	<span class="k">return</span> <span class="n">d</span></div>


<div class="viewcode-block" id="CharStringCompileError"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.CharStringCompileError">[docs]</a><span class="k">class</span> <span class="nc">CharStringCompileError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span> <span class="k">pass</span></div>


<div class="viewcode-block" id="SimpleT2Decompiler"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler">[docs]</a><span class="k">class</span> <span class="nc">SimpleT2Decompiler</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">localSubrs</span><span class="p">,</span> <span class="n">globalSubrs</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">localSubrs</span> <span class="o">=</span> <span class="n">localSubrs</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">localBias</span> <span class="o">=</span> <span class="n">calcSubrBias</span><span class="p">(</span><span class="n">localSubrs</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">globalSubrs</span> <span class="o">=</span> <span class="n">globalSubrs</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">globalBias</span> <span class="o">=</span> <span class="n">calcSubrBias</span><span class="p">(</span><span class="n">globalSubrs</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">private</span> <span class="o">=</span> <span class="n">private</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

<div class="viewcode-block" id="SimpleT2Decompiler.reset"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.reset">[docs]</a>	<span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">callingStack</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">operandStack</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">hintCount</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">hintMaskBytes</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">numRegions</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.execute"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.execute">[docs]</a>	<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">charString</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">callingStack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">charString</span><span class="p">)</span>
		<span class="n">needsDecompilation</span> <span class="o">=</span> <span class="n">charString</span><span class="o">.</span><span class="n">needsDecompilation</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">needsDecompilation</span><span class="p">:</span>
			<span class="n">program</span> <span class="o">=</span> <span class="p">[]</span>
			<span class="n">pushToProgram</span> <span class="o">=</span> <span class="n">program</span><span class="o">.</span><span class="n">append</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">pushToProgram</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">None</span>
		<span class="n">pushToStack</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operandStack</span><span class="o">.</span><span class="n">append</span>
		<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
			<span class="n">token</span><span class="p">,</span> <span class="n">isOperator</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">charString</span><span class="o">.</span><span class="n">getToken</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
				<span class="k">break</span>  <span class="c1"># we&#39;re done!</span>
			<span class="n">pushToProgram</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">isOperator</span><span class="p">:</span>
				<span class="n">handlerName</span> <span class="o">=</span> <span class="s2">&quot;op_&quot;</span> <span class="o">+</span> <span class="n">token</span>
				<span class="n">handler</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handlerName</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">handler</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
					<span class="n">rv</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">rv</span><span class="p">:</span>
						<span class="n">hintMaskBytes</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">rv</span>
						<span class="n">pushToProgram</span><span class="p">(</span><span class="n">hintMaskBytes</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">pushToStack</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">needsDecompilation</span><span class="p">:</span>
			<span class="n">charString</span><span class="o">.</span><span class="n">setProgram</span><span class="p">(</span><span class="n">program</span><span class="p">)</span>
		<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">callingStack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.pop"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.pop">[docs]</a>	<span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operandStack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
		<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">operandStack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
		<span class="k">return</span> <span class="n">value</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.popall"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.popall">[docs]</a>	<span class="k">def</span> <span class="nf">popall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">stack</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operandStack</span><span class="p">[:]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">operandStack</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">return</span> <span class="n">stack</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.push"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.push">[docs]</a>	<span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">operandStack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.op_return"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_return">[docs]</a>	<span class="k">def</span> <span class="nf">op_return</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operandStack</span><span class="p">:</span>
			<span class="k">pass</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.op_endchar"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_endchar">[docs]</a>	<span class="k">def</span> <span class="nf">op_endchar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">pass</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.op_ignore"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_ignore">[docs]</a>	<span class="k">def</span> <span class="nf">op_ignore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">pass</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.op_callsubr"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_callsubr">[docs]</a>	<span class="k">def</span> <span class="nf">op_callsubr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">subrIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">subr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">localSubrs</span><span class="p">[</span><span class="n">subrIndex</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">localBias</span><span class="p">]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">subr</span><span class="p">)</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.op_callgsubr"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_callgsubr">[docs]</a>	<span class="k">def</span> <span class="nf">op_callgsubr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">subrIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">subr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">globalSubrs</span><span class="p">[</span><span class="n">subrIndex</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">globalBias</span><span class="p">]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">subr</span><span class="p">)</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.op_hstem"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_hstem">[docs]</a>	<span class="k">def</span> <span class="nf">op_hstem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">countHints</span><span class="p">()</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_vstem"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_vstem">[docs]</a>	<span class="k">def</span> <span class="nf">op_vstem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">countHints</span><span class="p">()</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_hstemhm"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_hstemhm">[docs]</a>	<span class="k">def</span> <span class="nf">op_hstemhm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">countHints</span><span class="p">()</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_vstemhm"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_vstemhm">[docs]</a>	<span class="k">def</span> <span class="nf">op_vstemhm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">countHints</span><span class="p">()</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.op_hintmask"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_hintmask">[docs]</a>	<span class="k">def</span> <span class="nf">op_hintmask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hintMaskBytes</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">countHints</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">hintMaskBytes</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hintCount</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span> <span class="o">//</span> <span class="mi">8</span>
		<span class="n">hintMaskBytes</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">callingStack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">getBytes</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hintMaskBytes</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">hintMaskBytes</span><span class="p">,</span> <span class="n">index</span></div>

	<span class="n">op_cntrmask</span> <span class="o">=</span> <span class="n">op_hintmask</span>

<div class="viewcode-block" id="SimpleT2Decompiler.countHints"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.countHints">[docs]</a>	<span class="k">def</span> <span class="nf">countHints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">hintCount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hintCount</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span></div>

	<span class="c1"># misc</span>
<div class="viewcode-block" id="SimpleT2Decompiler.op_and"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_and">[docs]</a>	<span class="k">def</span> <span class="nf">op_and</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_or"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_or">[docs]</a>	<span class="k">def</span> <span class="nf">op_or</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_not"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_not">[docs]</a>	<span class="k">def</span> <span class="nf">op_not</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_store"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_store">[docs]</a>	<span class="k">def</span> <span class="nf">op_store</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_abs"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_abs">[docs]</a>	<span class="k">def</span> <span class="nf">op_abs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_add"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_add">[docs]</a>	<span class="k">def</span> <span class="nf">op_add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_sub"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_sub">[docs]</a>	<span class="k">def</span> <span class="nf">op_sub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_div"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_div">[docs]</a>	<span class="k">def</span> <span class="nf">op_div</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_load"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_load">[docs]</a>	<span class="k">def</span> <span class="nf">op_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_neg"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_neg">[docs]</a>	<span class="k">def</span> <span class="nf">op_neg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_eq"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_eq">[docs]</a>	<span class="k">def</span> <span class="nf">op_eq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_drop"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_drop">[docs]</a>	<span class="k">def</span> <span class="nf">op_drop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_put"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_put">[docs]</a>	<span class="k">def</span> <span class="nf">op_put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_get"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_get">[docs]</a>	<span class="k">def</span> <span class="nf">op_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_ifelse"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_ifelse">[docs]</a>	<span class="k">def</span> <span class="nf">op_ifelse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_random"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_random">[docs]</a>	<span class="k">def</span> <span class="nf">op_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_mul"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_mul">[docs]</a>	<span class="k">def</span> <span class="nf">op_mul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_sqrt"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_sqrt">[docs]</a>	<span class="k">def</span> <span class="nf">op_sqrt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_dup"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_dup">[docs]</a>	<span class="k">def</span> <span class="nf">op_dup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_exch"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_exch">[docs]</a>	<span class="k">def</span> <span class="nf">op_exch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_index"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_index">[docs]</a>	<span class="k">def</span> <span class="nf">op_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="SimpleT2Decompiler.op_roll"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_roll">[docs]</a>	<span class="k">def</span> <span class="nf">op_roll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

	<span class="c1"># TODO(behdad): move to T2OutlineExtractor and add a &#39;setVariation&#39;</span>
	<span class="c1"># method that takes VarStoreData and a location</span>
<div class="viewcode-block" id="SimpleT2Decompiler.op_blend"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_blend">[docs]</a>	<span class="k">def</span> <span class="nf">op_blend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">numRegions</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">numRegions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">private</span><span class="o">.</span><span class="n">getNumRegions</span><span class="p">()</span>
		<span class="n">numBlends</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">numOps</span> <span class="o">=</span> <span class="n">numBlends</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">numRegions</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
		<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">operandStack</span><span class="p">[</span><span class="o">-</span><span class="p">(</span><span class="n">numOps</span><span class="o">-</span><span class="n">numBlends</span><span class="p">):]</span> <span class="c1"># Leave the default operands on the stack.</span></div>

<div class="viewcode-block" id="SimpleT2Decompiler.op_vsindex"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.SimpleT2Decompiler.op_vsindex">[docs]</a>	<span class="k">def</span> <span class="nf">op_vsindex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">vi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">numRegions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">private</span><span class="o">.</span><span class="n">getNumRegions</span><span class="p">(</span><span class="n">vi</span><span class="p">)</span></div></div>


<span class="n">t1Operators</span> <span class="o">=</span> <span class="p">[</span>
<span class="c1">#	opcode		name</span>
	<span class="p">(</span><span class="mi">1</span><span class="p">,</span>		<span class="s1">&#39;hstem&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">3</span><span class="p">,</span>		<span class="s1">&#39;vstem&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">4</span><span class="p">,</span>		<span class="s1">&#39;vmoveto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">5</span><span class="p">,</span>		<span class="s1">&#39;rlineto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">6</span><span class="p">,</span>		<span class="s1">&#39;hlineto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">7</span><span class="p">,</span>		<span class="s1">&#39;vlineto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">8</span><span class="p">,</span>		<span class="s1">&#39;rrcurveto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">9</span><span class="p">,</span>		<span class="s1">&#39;closepath&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">10</span><span class="p">,</span>		<span class="s1">&#39;callsubr&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">11</span><span class="p">,</span>		<span class="s1">&#39;return&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">13</span><span class="p">,</span>		<span class="s1">&#39;hsbw&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">14</span><span class="p">,</span>		<span class="s1">&#39;endchar&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">21</span><span class="p">,</span>		<span class="s1">&#39;rmoveto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">22</span><span class="p">,</span>		<span class="s1">&#39;hmoveto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">30</span><span class="p">,</span>		<span class="s1">&#39;vhcurveto&#39;</span><span class="p">),</span>
	<span class="p">(</span><span class="mi">31</span><span class="p">,</span>		<span class="s1">&#39;hvcurveto&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>	<span class="s1">&#39;dotsection&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>	<span class="s1">&#39;vstem3&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>	<span class="s1">&#39;hstem3&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>	<span class="s1">&#39;seac&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>	<span class="s1">&#39;sbw&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>	<span class="s1">&#39;div&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>	<span class="s1">&#39;callothersubr&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">17</span><span class="p">),</span>	<span class="s1">&#39;pop&#39;</span><span class="p">),</span>
	<span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">33</span><span class="p">),</span>	<span class="s1">&#39;setcurrentpoint&#39;</span><span class="p">),</span>
<span class="p">]</span>


<div class="viewcode-block" id="T2WidthExtractor"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2WidthExtractor">[docs]</a><span class="k">class</span> <span class="nc">T2WidthExtractor</span><span class="p">(</span><span class="n">SimpleT2Decompiler</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">localSubrs</span><span class="p">,</span> <span class="n">globalSubrs</span><span class="p">,</span> <span class="n">nominalWidthX</span><span class="p">,</span> <span class="n">defaultWidthX</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
		<span class="n">SimpleT2Decompiler</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">localSubrs</span><span class="p">,</span> <span class="n">globalSubrs</span><span class="p">,</span> <span class="n">private</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">nominalWidthX</span> <span class="o">=</span> <span class="n">nominalWidthX</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">defaultWidthX</span> <span class="o">=</span> <span class="n">defaultWidthX</span>

<div class="viewcode-block" id="T2WidthExtractor.reset"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2WidthExtractor.reset">[docs]</a>	<span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">SimpleT2Decompiler</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">gotWidth</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="T2WidthExtractor.popallWidth"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2WidthExtractor.popallWidth">[docs]</a>	<span class="k">def</span> <span class="nf">popallWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evenOdd</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gotWidth</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">evenOdd</span> <span class="o">^</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">):</span>
				<span class="c1"># For CFF2 charstrings, this should never happen</span>
				<span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">defaultWidthX</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;CFF2 CharStrings must not have an initial width value&quot;</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nominalWidthX</span> <span class="o">+</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
				<span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">defaultWidthX</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">gotWidth</span> <span class="o">=</span> <span class="mi">1</span>
		<span class="k">return</span> <span class="n">args</span></div>

<div class="viewcode-block" id="T2WidthExtractor.countHints"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2WidthExtractor.countHints">[docs]</a>	<span class="k">def</span> <span class="nf">countHints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popallWidth</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">hintCount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hintCount</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span></div>

<div class="viewcode-block" id="T2WidthExtractor.op_rmoveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2WidthExtractor.op_rmoveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_rmoveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">popallWidth</span><span class="p">()</span></div>

<div class="viewcode-block" id="T2WidthExtractor.op_hmoveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2WidthExtractor.op_hmoveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_hmoveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">popallWidth</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="T2WidthExtractor.op_vmoveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2WidthExtractor.op_vmoveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_vmoveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">popallWidth</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="T2WidthExtractor.op_endchar"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2WidthExtractor.op_endchar">[docs]</a>	<span class="k">def</span> <span class="nf">op_endchar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">popallWidth</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="T2OutlineExtractor"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor">[docs]</a><span class="k">class</span> <span class="nc">T2OutlineExtractor</span><span class="p">(</span><span class="n">T2WidthExtractor</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pen</span><span class="p">,</span> <span class="n">localSubrs</span><span class="p">,</span> <span class="n">globalSubrs</span><span class="p">,</span> <span class="n">nominalWidthX</span><span class="p">,</span> <span class="n">defaultWidthX</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
		<span class="n">T2WidthExtractor</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
			<span class="bp">self</span><span class="p">,</span> <span class="n">localSubrs</span><span class="p">,</span> <span class="n">globalSubrs</span><span class="p">,</span> <span class="n">nominalWidthX</span><span class="p">,</span> <span class="n">defaultWidthX</span><span class="p">,</span> <span class="n">private</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pen</span> <span class="o">=</span> <span class="n">pen</span>

<div class="viewcode-block" id="T2OutlineExtractor.reset"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.reset">[docs]</a>	<span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">T2WidthExtractor</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">currentPoint</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sawMoveTo</span> <span class="o">=</span> <span class="mi">0</span></div>

	<span class="k">def</span> <span class="nf">_nextPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
		<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentPoint</span>
		<span class="n">point</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y</span> <span class="o">+</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">currentPoint</span> <span class="o">=</span> <span class="n">point</span>
		<span class="k">return</span> <span class="n">point</span>

<div class="viewcode-block" id="T2OutlineExtractor.rMoveTo"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.rMoveTo">[docs]</a>	<span class="k">def</span> <span class="nf">rMoveTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">moveTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_nextPoint</span><span class="p">(</span><span class="n">point</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sawMoveTo</span> <span class="o">=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.rLineTo"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.rLineTo">[docs]</a>	<span class="k">def</span> <span class="nf">rLineTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">sawMoveTo</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">rMoveTo</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">lineTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_nextPoint</span><span class="p">(</span><span class="n">point</span><span class="p">))</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.rCurveTo"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.rCurveTo">[docs]</a>	<span class="k">def</span> <span class="nf">rCurveTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt1</span><span class="p">,</span> <span class="n">pt2</span><span class="p">,</span> <span class="n">pt3</span><span class="p">):</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">sawMoveTo</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">rMoveTo</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
		<span class="n">nextPoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nextPoint</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">curveTo</span><span class="p">(</span><span class="n">nextPoint</span><span class="p">(</span><span class="n">pt1</span><span class="p">),</span> <span class="n">nextPoint</span><span class="p">(</span><span class="n">pt2</span><span class="p">),</span> <span class="n">nextPoint</span><span class="p">(</span><span class="n">pt3</span><span class="p">))</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.closePath"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.closePath">[docs]</a>	<span class="k">def</span> <span class="nf">closePath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sawMoveTo</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">closePath</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sawMoveTo</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.endPath"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.endPath">[docs]</a>	<span class="k">def</span> <span class="nf">endPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c1"># In T2 there are no open paths, so always do a closePath when</span>
		<span class="c1"># finishing a sub path.</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">closePath</span><span class="p">()</span></div>

	<span class="c1">#</span>
	<span class="c1"># hint operators</span>
	<span class="c1">#</span>
	<span class="c1">#def op_hstem(self, index):</span>
	<span class="c1">#	self.countHints()</span>
	<span class="c1">#def op_vstem(self, index):</span>
	<span class="c1">#	self.countHints()</span>
	<span class="c1">#def op_hstemhm(self, index):</span>
	<span class="c1">#	self.countHints()</span>
	<span class="c1">#def op_vstemhm(self, index):</span>
	<span class="c1">#	self.countHints()</span>
	<span class="c1">#def op_hintmask(self, index):</span>
	<span class="c1">#	self.countHints()</span>
	<span class="c1">#def op_cntrmask(self, index):</span>
	<span class="c1">#	self.countHints()</span>

	<span class="c1">#</span>
	<span class="c1"># path constructors, moveto</span>
	<span class="c1">#</span>
<div class="viewcode-block" id="T2OutlineExtractor.op_rmoveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_rmoveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_rmoveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">endPath</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rMoveTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">popallWidth</span><span class="p">())</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_hmoveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_hmoveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_hmoveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">endPath</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rMoveTo</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">popallWidth</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">))</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_vmoveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_vmoveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_vmoveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">endPath</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rMoveTo</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">popallWidth</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_endchar"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_endchar">[docs]</a>	<span class="k">def</span> <span class="nf">op_endchar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">endPath</span><span class="p">()</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popallWidth</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">args</span><span class="p">:</span>
			<span class="kn">from</span> <span class="nn">fontTools.encodings.StandardEncoding</span> <span class="k">import</span> <span class="n">StandardEncoding</span>
			<span class="c1"># endchar can do seac accent bulding; The T2 spec says it&#39;s deprecated,</span>
			<span class="c1"># but recent software that shall remain nameless does output it.</span>
			<span class="n">adx</span><span class="p">,</span> <span class="n">ady</span><span class="p">,</span> <span class="n">bchar</span><span class="p">,</span> <span class="n">achar</span> <span class="o">=</span> <span class="n">args</span>
			<span class="n">baseGlyph</span> <span class="o">=</span> <span class="n">StandardEncoding</span><span class="p">[</span><span class="n">bchar</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">addComponent</span><span class="p">(</span><span class="n">baseGlyph</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
			<span class="n">accentGlyph</span> <span class="o">=</span> <span class="n">StandardEncoding</span><span class="p">[</span><span class="n">achar</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">addComponent</span><span class="p">(</span><span class="n">accentGlyph</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">adx</span><span class="p">,</span> <span class="n">ady</span><span class="p">))</span></div>

	<span class="c1">#</span>
	<span class="c1"># path constructors, lines</span>
	<span class="c1">#</span>
<div class="viewcode-block" id="T2OutlineExtractor.op_rlineto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_rlineto">[docs]</a>	<span class="k">def</span> <span class="nf">op_rlineto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
			<span class="n">point</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">rLineTo</span><span class="p">(</span><span class="n">point</span><span class="p">)</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.op_hlineto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_hlineto">[docs]</a>	<span class="k">def</span> <span class="nf">op_hlineto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">alternatingLineto</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_vlineto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_vlineto">[docs]</a>	<span class="k">def</span> <span class="nf">op_vlineto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">alternatingLineto</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></div>

	<span class="c1">#</span>
	<span class="c1"># path constructors, curves</span>
	<span class="c1">#</span>
<div class="viewcode-block" id="T2OutlineExtractor.op_rrcurveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_rrcurveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_rrcurveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;{dxa dya dxb dyb dxc dyc}+ rrcurveto&quot;&quot;&quot;</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="mi">6</span><span class="p">):</span>
			<span class="n">dxa</span><span class="p">,</span> <span class="n">dya</span><span class="p">,</span> <span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">,</span> <span class="n">dxc</span><span class="p">,</span> <span class="n">dyc</span><span class="p">,</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">6</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dxa</span><span class="p">,</span> <span class="n">dya</span><span class="p">),</span> <span class="p">(</span><span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">),</span> <span class="p">(</span><span class="n">dxc</span><span class="p">,</span> <span class="n">dyc</span><span class="p">))</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.op_rcurveline"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_rcurveline">[docs]</a>	<span class="k">def</span> <span class="nf">op_rcurveline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;{dxa dya dxb dyb dxc dyc}+ dxd dyd rcurveline&quot;&quot;&quot;</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
			<span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">,</span> <span class="n">dxc</span><span class="p">,</span> <span class="n">dyc</span><span class="p">,</span> <span class="n">dxd</span><span class="p">,</span> <span class="n">dyd</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">6</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">),</span> <span class="p">(</span><span class="n">dxc</span><span class="p">,</span> <span class="n">dyc</span><span class="p">),</span> <span class="p">(</span><span class="n">dxd</span><span class="p">,</span> <span class="n">dyd</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rLineTo</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:])</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.op_rlinecurve"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_rlinecurve">[docs]</a>	<span class="k">def</span> <span class="nf">op_rlinecurve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;{dxa dya}+ dxb dyb dxc dyc dxd dyd rlinecurve&quot;&quot;&quot;</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="n">lineArgs</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lineArgs</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">rLineTo</span><span class="p">(</span><span class="n">lineArgs</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">])</span>
		<span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">,</span> <span class="n">dxc</span><span class="p">,</span> <span class="n">dyc</span><span class="p">,</span> <span class="n">dxd</span><span class="p">,</span> <span class="n">dyd</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">:]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">),</span> <span class="p">(</span><span class="n">dxc</span><span class="p">,</span> <span class="n">dyc</span><span class="p">),</span> <span class="p">(</span><span class="n">dxd</span><span class="p">,</span> <span class="n">dyd</span><span class="p">))</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.op_vvcurveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_vvcurveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_vvcurveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="s2">&quot;dx1? {dya dxb dyb dyc}+ vvcurveto&quot;</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">:</span>
			<span class="n">dx1</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
			<span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">dx1</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="mi">4</span><span class="p">):</span>
			<span class="n">dya</span><span class="p">,</span> <span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">,</span> <span class="n">dyc</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">4</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dx1</span><span class="p">,</span> <span class="n">dya</span><span class="p">),</span> <span class="p">(</span><span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dyc</span><span class="p">))</span>
			<span class="n">dx1</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.op_hhcurveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_hhcurveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_hhcurveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;dy1? {dxa dxb dyb dxc}+ hhcurveto&quot;&quot;&quot;</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">:</span>
			<span class="n">dy1</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
			<span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">dy1</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="mi">4</span><span class="p">):</span>
			<span class="n">dxa</span><span class="p">,</span> <span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">,</span> <span class="n">dxc</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">4</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dxa</span><span class="p">,</span> <span class="n">dy1</span><span class="p">),</span> <span class="p">(</span><span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">),</span> <span class="p">(</span><span class="n">dxc</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
			<span class="n">dy1</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.op_vhcurveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_vhcurveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_vhcurveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;dy1 dx2 dy2 dx3 {dxa dxb dyb dyc dyd dxe dye dxf}* dyf? vhcurveto (30)</span>
<span class="sd">		{dya dxb dyb dxc dxd dxe dye dyf}+ dxf? vhcurveto</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="k">while</span> <span class="n">args</span><span class="p">:</span>
			<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vcurveto</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">args</span><span class="p">:</span>
				<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hcurveto</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.op_hvcurveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_hvcurveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_hvcurveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;dx1 dx2 dy2 dy3 {dya dxb dyb dxc dxd dxe dye dyf}* dxf?</span>
<span class="sd">		{dxa dxb dyb dyc dyd dxe dye dxf}+ dyf?</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="k">while</span> <span class="n">args</span><span class="p">:</span>
			<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hcurveto</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">args</span><span class="p">:</span>
				<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vcurveto</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></div>

	<span class="c1">#</span>
	<span class="c1"># path constructors, flex</span>
	<span class="c1">#</span>
<div class="viewcode-block" id="T2OutlineExtractor.op_hflex"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_hflex">[docs]</a>	<span class="k">def</span> <span class="nf">op_hflex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">dx1</span><span class="p">,</span> <span class="n">dx2</span><span class="p">,</span> <span class="n">dy2</span><span class="p">,</span> <span class="n">dx3</span><span class="p">,</span> <span class="n">dx4</span><span class="p">,</span> <span class="n">dx5</span><span class="p">,</span> <span class="n">dx6</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="n">dy1</span> <span class="o">=</span> <span class="n">dy3</span> <span class="o">=</span> <span class="n">dy4</span> <span class="o">=</span> <span class="n">dy6</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">dy5</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy2</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dx1</span><span class="p">,</span> <span class="n">dy1</span><span class="p">),</span> <span class="p">(</span><span class="n">dx2</span><span class="p">,</span> <span class="n">dy2</span><span class="p">),</span> <span class="p">(</span><span class="n">dx3</span><span class="p">,</span> <span class="n">dy3</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dx4</span><span class="p">,</span> <span class="n">dy4</span><span class="p">),</span> <span class="p">(</span><span class="n">dx5</span><span class="p">,</span> <span class="n">dy5</span><span class="p">),</span> <span class="p">(</span><span class="n">dx6</span><span class="p">,</span> <span class="n">dy6</span><span class="p">))</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_flex"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_flex">[docs]</a>	<span class="k">def</span> <span class="nf">op_flex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">dx1</span><span class="p">,</span> <span class="n">dy1</span><span class="p">,</span> <span class="n">dx2</span><span class="p">,</span> <span class="n">dy2</span><span class="p">,</span> <span class="n">dx3</span><span class="p">,</span> <span class="n">dy3</span><span class="p">,</span> <span class="n">dx4</span><span class="p">,</span> <span class="n">dy4</span><span class="p">,</span> <span class="n">dx5</span><span class="p">,</span> <span class="n">dy5</span><span class="p">,</span> <span class="n">dx6</span><span class="p">,</span> <span class="n">dy6</span><span class="p">,</span> <span class="n">fd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dx1</span><span class="p">,</span> <span class="n">dy1</span><span class="p">),</span> <span class="p">(</span><span class="n">dx2</span><span class="p">,</span> <span class="n">dy2</span><span class="p">),</span> <span class="p">(</span><span class="n">dx3</span><span class="p">,</span> <span class="n">dy3</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dx4</span><span class="p">,</span> <span class="n">dy4</span><span class="p">),</span> <span class="p">(</span><span class="n">dx5</span><span class="p">,</span> <span class="n">dy5</span><span class="p">),</span> <span class="p">(</span><span class="n">dx6</span><span class="p">,</span> <span class="n">dy6</span><span class="p">))</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_hflex1"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_hflex1">[docs]</a>	<span class="k">def</span> <span class="nf">op_hflex1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">dx1</span><span class="p">,</span> <span class="n">dy1</span><span class="p">,</span> <span class="n">dx2</span><span class="p">,</span> <span class="n">dy2</span><span class="p">,</span> <span class="n">dx3</span><span class="p">,</span> <span class="n">dx4</span><span class="p">,</span> <span class="n">dx5</span><span class="p">,</span> <span class="n">dy5</span><span class="p">,</span> <span class="n">dx6</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="n">dy3</span> <span class="o">=</span> <span class="n">dy4</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">dy6</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">dy1</span> <span class="o">+</span> <span class="n">dy2</span> <span class="o">+</span> <span class="n">dy3</span> <span class="o">+</span> <span class="n">dy4</span> <span class="o">+</span> <span class="n">dy5</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dx1</span><span class="p">,</span> <span class="n">dy1</span><span class="p">),</span> <span class="p">(</span><span class="n">dx2</span><span class="p">,</span> <span class="n">dy2</span><span class="p">),</span> <span class="p">(</span><span class="n">dx3</span><span class="p">,</span> <span class="n">dy3</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dx4</span><span class="p">,</span> <span class="n">dy4</span><span class="p">),</span> <span class="p">(</span><span class="n">dx5</span><span class="p">,</span> <span class="n">dy5</span><span class="p">),</span> <span class="p">(</span><span class="n">dx6</span><span class="p">,</span> <span class="n">dy6</span><span class="p">))</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_flex1"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_flex1">[docs]</a>	<span class="k">def</span> <span class="nf">op_flex1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">dx1</span><span class="p">,</span> <span class="n">dy1</span><span class="p">,</span> <span class="n">dx2</span><span class="p">,</span> <span class="n">dy2</span><span class="p">,</span> <span class="n">dx3</span><span class="p">,</span> <span class="n">dy3</span><span class="p">,</span> <span class="n">dx4</span><span class="p">,</span> <span class="n">dy4</span><span class="p">,</span> <span class="n">dx5</span><span class="p">,</span> <span class="n">dy5</span><span class="p">,</span> <span class="n">d6</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="n">dx</span> <span class="o">=</span> <span class="n">dx1</span> <span class="o">+</span> <span class="n">dx2</span> <span class="o">+</span> <span class="n">dx3</span> <span class="o">+</span> <span class="n">dx4</span> <span class="o">+</span> <span class="n">dx5</span>
		<span class="n">dy</span> <span class="o">=</span> <span class="n">dy1</span> <span class="o">+</span> <span class="n">dy2</span> <span class="o">+</span> <span class="n">dy3</span> <span class="o">+</span> <span class="n">dy4</span> <span class="o">+</span> <span class="n">dy5</span>
		<span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
			<span class="n">dx6</span> <span class="o">=</span> <span class="n">d6</span>
			<span class="n">dy6</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">dx6</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span>
			<span class="n">dy6</span> <span class="o">=</span> <span class="n">d6</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dx1</span><span class="p">,</span> <span class="n">dy1</span><span class="p">),</span> <span class="p">(</span><span class="n">dx2</span><span class="p">,</span> <span class="n">dy2</span><span class="p">),</span> <span class="p">(</span><span class="n">dx3</span><span class="p">,</span> <span class="n">dy3</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dx4</span><span class="p">,</span> <span class="n">dy4</span><span class="p">),</span> <span class="p">(</span><span class="n">dx5</span><span class="p">,</span> <span class="n">dy5</span><span class="p">),</span> <span class="p">(</span><span class="n">dx6</span><span class="p">,</span> <span class="n">dy6</span><span class="p">))</span></div>

	<span class="c1"># misc</span>
<div class="viewcode-block" id="T2OutlineExtractor.op_and"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_and">[docs]</a>	<span class="k">def</span> <span class="nf">op_and</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_or"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_or">[docs]</a>	<span class="k">def</span> <span class="nf">op_or</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_not"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_not">[docs]</a>	<span class="k">def</span> <span class="nf">op_not</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_store"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_store">[docs]</a>	<span class="k">def</span> <span class="nf">op_store</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_abs"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_abs">[docs]</a>	<span class="k">def</span> <span class="nf">op_abs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_add"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_add">[docs]</a>	<span class="k">def</span> <span class="nf">op_add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_sub"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_sub">[docs]</a>	<span class="k">def</span> <span class="nf">op_sub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_div"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_div">[docs]</a>	<span class="k">def</span> <span class="nf">op_div</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">num2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">num1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">d1</span> <span class="o">=</span> <span class="n">num1</span><span class="o">//</span><span class="n">num2</span>
		<span class="n">d2</span> <span class="o">=</span> <span class="n">num1</span><span class="o">/</span><span class="n">num2</span>
		<span class="k">if</span> <span class="n">d1</span> <span class="o">==</span> <span class="n">d2</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_load"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_load">[docs]</a>	<span class="k">def</span> <span class="nf">op_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_neg"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_neg">[docs]</a>	<span class="k">def</span> <span class="nf">op_neg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_eq"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_eq">[docs]</a>	<span class="k">def</span> <span class="nf">op_eq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_drop"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_drop">[docs]</a>	<span class="k">def</span> <span class="nf">op_drop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_put"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_put">[docs]</a>	<span class="k">def</span> <span class="nf">op_put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_get"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_get">[docs]</a>	<span class="k">def</span> <span class="nf">op_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_ifelse"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_ifelse">[docs]</a>	<span class="k">def</span> <span class="nf">op_ifelse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_random"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_random">[docs]</a>	<span class="k">def</span> <span class="nf">op_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_mul"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_mul">[docs]</a>	<span class="k">def</span> <span class="nf">op_mul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_sqrt"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_sqrt">[docs]</a>	<span class="k">def</span> <span class="nf">op_sqrt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_dup"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_dup">[docs]</a>	<span class="k">def</span> <span class="nf">op_dup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_exch"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_exch">[docs]</a>	<span class="k">def</span> <span class="nf">op_exch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_index"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_index">[docs]</a>	<span class="k">def</span> <span class="nf">op_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>
<div class="viewcode-block" id="T2OutlineExtractor.op_roll"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.op_roll">[docs]</a>	<span class="k">def</span> <span class="nf">op_roll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

	<span class="c1">#</span>
	<span class="c1"># miscellaneous helpers</span>
	<span class="c1">#</span>
<div class="viewcode-block" id="T2OutlineExtractor.alternatingLineto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.alternatingLineto">[docs]</a>	<span class="k">def</span> <span class="nf">alternatingLineto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">isHorizontal</span><span class="p">):</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">isHorizontal</span><span class="p">:</span>
				<span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">rLineTo</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
			<span class="n">isHorizontal</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">isHorizontal</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.vcurveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.vcurveto">[docs]</a>	<span class="k">def</span> <span class="nf">vcurveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
		<span class="n">dya</span><span class="p">,</span> <span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">,</span> <span class="n">dxc</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
		<span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
			<span class="n">dyc</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
			<span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">dyc</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="n">dya</span><span class="p">),</span> <span class="p">(</span><span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">),</span> <span class="p">(</span><span class="n">dxc</span><span class="p">,</span> <span class="n">dyc</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">args</span></div>

<div class="viewcode-block" id="T2OutlineExtractor.hcurveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2OutlineExtractor.hcurveto">[docs]</a>	<span class="k">def</span> <span class="nf">hcurveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
		<span class="n">dxa</span><span class="p">,</span> <span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">,</span> <span class="n">dyc</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
		<span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
			<span class="n">dxc</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
			<span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">dxc</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rCurveTo</span><span class="p">((</span><span class="n">dxa</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">dxb</span><span class="p">,</span> <span class="n">dyb</span><span class="p">),</span> <span class="p">(</span><span class="n">dxc</span><span class="p">,</span> <span class="n">dyc</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">args</span></div></div>

<div class="viewcode-block" id="T1OutlineExtractor"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor">[docs]</a><span class="k">class</span> <span class="nc">T1OutlineExtractor</span><span class="p">(</span><span class="n">T2OutlineExtractor</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pen</span><span class="p">,</span> <span class="n">subrs</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pen</span> <span class="o">=</span> <span class="n">pen</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">subrs</span> <span class="o">=</span> <span class="n">subrs</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

<div class="viewcode-block" id="T1OutlineExtractor.reset"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.reset">[docs]</a>	<span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">flexing</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sbx</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">T2OutlineExtractor</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="T1OutlineExtractor.endPath"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.endPath">[docs]</a>	<span class="k">def</span> <span class="nf">endPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sawMoveTo</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">endPath</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sawMoveTo</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="T1OutlineExtractor.popallWidth"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.popallWidth">[docs]</a>	<span class="k">def</span> <span class="nf">popallWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evenOdd</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span></div>

<div class="viewcode-block" id="T1OutlineExtractor.exch"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.exch">[docs]</a>	<span class="k">def</span> <span class="nf">exch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">stack</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operandStack</span>
		<span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></div>

	<span class="c1">#</span>
	<span class="c1"># path constructors</span>
	<span class="c1">#</span>
<div class="viewcode-block" id="T1OutlineExtractor.op_rmoveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_rmoveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_rmoveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flexing</span><span class="p">:</span>
			<span class="k">return</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">endPath</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rMoveTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">())</span></div>
<div class="viewcode-block" id="T1OutlineExtractor.op_hmoveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_hmoveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_hmoveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flexing</span><span class="p">:</span>
			<span class="c1"># We must add a parameter to the stack if we are flexing</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
			<span class="k">return</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">endPath</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rMoveTo</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">))</span></div>
<div class="viewcode-block" id="T1OutlineExtractor.op_vmoveto"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_vmoveto">[docs]</a>	<span class="k">def</span> <span class="nf">op_vmoveto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flexing</span><span class="p">:</span>
			<span class="c1"># We must add a parameter to the stack if we are flexing</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">exch</span><span class="p">()</span>
			<span class="k">return</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">endPath</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rMoveTo</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span></div>
<div class="viewcode-block" id="T1OutlineExtractor.op_closepath"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_closepath">[docs]</a>	<span class="k">def</span> <span class="nf">op_closepath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">closePath</span><span class="p">()</span></div>
<div class="viewcode-block" id="T1OutlineExtractor.op_setcurrentpoint"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_setcurrentpoint">[docs]</a>	<span class="k">def</span> <span class="nf">op_setcurrentpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">args</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">currentPoint</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span></div>

<div class="viewcode-block" id="T1OutlineExtractor.op_endchar"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_endchar">[docs]</a>	<span class="k">def</span> <span class="nf">op_endchar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">endPath</span><span class="p">()</span></div>

<div class="viewcode-block" id="T1OutlineExtractor.op_hsbw"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_hsbw">[docs]</a>	<span class="k">def</span> <span class="nf">op_hsbw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">sbx</span><span class="p">,</span> <span class="n">wx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">wx</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sbx</span> <span class="o">=</span> <span class="n">sbx</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">currentPoint</span> <span class="o">=</span> <span class="n">sbx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentPoint</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>
<div class="viewcode-block" id="T1OutlineExtractor.op_sbw"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_sbw">[docs]</a>	<span class="k">def</span> <span class="nf">op_sbw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>  <span class="c1"># XXX</span></div>

	<span class="c1">#</span>
<div class="viewcode-block" id="T1OutlineExtractor.op_callsubr"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_callsubr">[docs]</a>	<span class="k">def</span> <span class="nf">op_callsubr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">subrIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">subr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subrs</span><span class="p">[</span><span class="n">subrIndex</span><span class="p">]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">subr</span><span class="p">)</span></div>
<div class="viewcode-block" id="T1OutlineExtractor.op_callothersubr"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_callothersubr">[docs]</a>	<span class="k">def</span> <span class="nf">op_callothersubr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="n">subrIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">nArgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="c1">#print nArgs, subrIndex, &quot;callothersubr&quot;</span>
		<span class="k">if</span> <span class="n">subrIndex</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">nArgs</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">doFlex</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">flexing</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">elif</span> <span class="n">subrIndex</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">nArgs</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">flexing</span> <span class="o">=</span> <span class="mi">1</span></div>
		<span class="c1"># ignore...</span>
<div class="viewcode-block" id="T1OutlineExtractor.op_pop"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_pop">[docs]</a>	<span class="k">def</span> <span class="nf">op_pop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="k">pass</span>  <span class="c1"># ignore...</span></div>

<div class="viewcode-block" id="T1OutlineExtractor.doFlex"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.doFlex">[docs]</a>	<span class="k">def</span> <span class="nf">doFlex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">finaly</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">finalx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>	<span class="c1"># flex height is unused</span>

		<span class="n">p3y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">p3x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">bcp4y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">bcp4x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">bcp3y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">bcp3x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">p2y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">p2x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">bcp2y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">bcp2x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">bcp1y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">bcp1x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">rpy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">rpx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

		<span class="c1"># call rrcurveto</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">bcp1x</span><span class="o">+</span><span class="n">rpx</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">bcp1y</span><span class="o">+</span><span class="n">rpy</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">bcp2x</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">bcp2y</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">p2x</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">p2y</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">op_rrcurveto</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

		<span class="c1"># call rrcurveto</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">bcp3x</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">bcp3y</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">bcp4x</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">bcp4y</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">p3x</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">p3y</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">op_rrcurveto</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

		<span class="c1"># Push back final coords so subr 0 can find them</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">finalx</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">finaly</span><span class="p">)</span></div>

<div class="viewcode-block" id="T1OutlineExtractor.op_dotsection"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_dotsection">[docs]</a>	<span class="k">def</span> <span class="nf">op_dotsection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>  <span class="c1"># XXX</span></div>
<div class="viewcode-block" id="T1OutlineExtractor.op_hstem3"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_hstem3">[docs]</a>	<span class="k">def</span> <span class="nf">op_hstem3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>  <span class="c1"># XXX</span></div>
<div class="viewcode-block" id="T1OutlineExtractor.op_seac"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_seac">[docs]</a>	<span class="k">def</span> <span class="nf">op_seac</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="s2">&quot;asb adx ady bchar achar seac&quot;</span>
		<span class="kn">from</span> <span class="nn">fontTools.encodings.StandardEncoding</span> <span class="k">import</span> <span class="n">StandardEncoding</span>
		<span class="n">asb</span><span class="p">,</span> <span class="n">adx</span><span class="p">,</span> <span class="n">ady</span><span class="p">,</span> <span class="n">bchar</span><span class="p">,</span> <span class="n">achar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="n">baseGlyph</span> <span class="o">=</span> <span class="n">StandardEncoding</span><span class="p">[</span><span class="n">bchar</span><span class="p">]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">addComponent</span><span class="p">(</span><span class="n">baseGlyph</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
		<span class="n">accentGlyph</span> <span class="o">=</span> <span class="n">StandardEncoding</span><span class="p">[</span><span class="n">achar</span><span class="p">]</span>
		<span class="n">adx</span> <span class="o">=</span> <span class="n">adx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sbx</span> <span class="o">-</span> <span class="n">asb</span>  <span class="c1"># seac weirdness</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">addComponent</span><span class="p">(</span><span class="n">accentGlyph</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">adx</span><span class="p">,</span> <span class="n">ady</span><span class="p">))</span></div>
<div class="viewcode-block" id="T1OutlineExtractor.op_vstem3"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1OutlineExtractor.op_vstem3">[docs]</a>	<span class="k">def</span> <span class="nf">op_vstem3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>  <span class="c1"># XXX</span></div></div>

<div class="viewcode-block" id="T2CharString"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString">[docs]</a><span class="k">class</span> <span class="nc">T2CharString</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="n">operandEncoding</span> <span class="o">=</span> <span class="n">t2OperandEncoding</span>
	<span class="n">operators</span><span class="p">,</span> <span class="n">opcodes</span> <span class="o">=</span> <span class="n">buildOperatorDict</span><span class="p">(</span><span class="n">t2Operators</span><span class="p">)</span>
	<span class="n">decompilerClass</span> <span class="o">=</span> <span class="n">SimpleT2Decompiler</span>
	<span class="n">outlineExtractor</span> <span class="o">=</span> <span class="n">T2OutlineExtractor</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytecode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">program</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">globalSubrs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">program</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">program</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span> <span class="o">=</span> <span class="n">bytecode</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">program</span> <span class="o">=</span> <span class="n">program</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">private</span> <span class="o">=</span> <span class="n">private</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">globalSubrs</span> <span class="o">=</span> <span class="n">globalSubrs</span> <span class="k">if</span> <span class="n">globalSubrs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_cur_vsindex</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="T2CharString.getNumRegions"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.getNumRegions">[docs]</a>	<span class="k">def</span> <span class="nf">getNumRegions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vsindex</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
		<span class="n">pd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">private</span>
		<span class="k">assert</span><span class="p">(</span><span class="n">pd</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">vsindex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_cur_vsindex</span> <span class="o">=</span> <span class="n">vsindex</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cur_vsindex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_cur_vsindex</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">vsindex</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">pd</span><span class="p">,</span> <span class="s1">&#39;vsindex&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span>
		<span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">getNumRegions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cur_vsindex</span><span class="p">)</span></div>

	<span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">%s</span><span class="s2"> (source) at </span><span class="si">%x</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">%s</span><span class="s2"> (bytecode) at </span><span class="si">%x</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

<div class="viewcode-block" id="T2CharString.getIntEncoder"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.getIntEncoder">[docs]</a>	<span class="k">def</span> <span class="nf">getIntEncoder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">encodeIntT2</span></div>

<div class="viewcode-block" id="T2CharString.getFixedEncoder"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.getFixedEncoder">[docs]</a>	<span class="k">def</span> <span class="nf">getFixedEncoder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">encodeFixed</span></div>

<div class="viewcode-block" id="T2CharString.decompile"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.decompile">[docs]</a>	<span class="k">def</span> <span class="nf">decompile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">needsDecompilation</span><span class="p">():</span>
			<span class="k">return</span>
		<span class="n">subrs</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">private</span><span class="p">,</span> <span class="s2">&quot;Subrs&quot;</span><span class="p">,</span> <span class="p">[])</span>
		<span class="n">decompiler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decompilerClass</span><span class="p">(</span><span class="n">subrs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">globalSubrs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">private</span><span class="p">)</span>
		<span class="n">decompiler</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="T2CharString.draw"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.draw">[docs]</a>	<span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pen</span><span class="p">):</span>
		<span class="n">subrs</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">private</span><span class="p">,</span> <span class="s2">&quot;Subrs&quot;</span><span class="p">,</span> <span class="p">[])</span>
		<span class="n">extractor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outlineExtractor</span><span class="p">(</span><span class="n">pen</span><span class="p">,</span> <span class="n">subrs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">globalSubrs</span><span class="p">,</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">private</span><span class="o">.</span><span class="n">nominalWidthX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">private</span><span class="o">.</span><span class="n">defaultWidthX</span><span class="p">,</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">private</span><span class="p">)</span>
		<span class="n">extractor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">extractor</span><span class="o">.</span><span class="n">width</span></div>

<div class="viewcode-block" id="T2CharString.calcBounds"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.calcBounds">[docs]</a>	<span class="k">def</span> <span class="nf">calcBounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyphSet</span><span class="p">):</span>
		<span class="n">boundsPen</span> <span class="o">=</span> <span class="n">BoundsPen</span><span class="p">(</span><span class="n">glyphSet</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">boundsPen</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">boundsPen</span><span class="o">.</span><span class="n">bounds</span></div>

<div class="viewcode-block" id="T2CharString.compile"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.compile">[docs]</a>	<span class="k">def</span> <span class="nf">compile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">isCFF2</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">return</span>
		<span class="n">opcodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">opcodes</span>
		<span class="n">program</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">program</span>

		<span class="k">if</span> <span class="n">isCFF2</span><span class="p">:</span>
			<span class="c1"># If present, remove return and endchar operators.</span>
			<span class="k">if</span> <span class="n">program</span> <span class="ow">and</span> <span class="n">program</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;return&quot;</span><span class="p">,</span> <span class="s2">&quot;endchar&quot;</span><span class="p">):</span>
				<span class="n">program</span> <span class="o">=</span> <span class="n">program</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
		<span class="k">elif</span> <span class="n">program</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">program</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">basestring</span><span class="p">):</span>
			<span class="k">raise</span> <span class="n">CharStringCompileError</span><span class="p">(</span>
				<span class="s2">&quot;T2CharString or Subr has items on the stack after last operator.&quot;</span>
			<span class="p">)</span>

		<span class="n">bytecode</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">encodeInt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getIntEncoder</span><span class="p">()</span>
		<span class="n">encodeFixed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFixedEncoder</span><span class="p">()</span>
		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">program</span><span class="p">)</span>
		<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">:</span>
			<span class="n">token</span> <span class="o">=</span> <span class="n">program</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
			<span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
			<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">bytecode</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">bytechr</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">opcodes</span><span class="p">[</span><span class="n">token</span><span class="p">])</span>
				<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
					<span class="k">raise</span> <span class="n">CharStringCompileError</span><span class="p">(</span><span class="s2">&quot;illegal operator: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">token</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">token</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;hintmask&#39;</span><span class="p">,</span> <span class="s1">&#39;cntrmask&#39;</span><span class="p">):</span>
					<span class="n">bytecode</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">program</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c1"># hint mask</span>
					<span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
			<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
				<span class="n">bytecode</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">encodeInt</span><span class="p">(</span><span class="n">token</span><span class="p">))</span>
			<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
				<span class="n">bytecode</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">encodeFixed</span><span class="p">(</span><span class="n">token</span><span class="p">))</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;unsupported type: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">bytecode</span> <span class="o">=</span> <span class="n">bytesjoin</span><span class="p">(</span><span class="n">bytecode</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
			<span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">bytecode</span><span class="p">)</span>
			<span class="k">raise</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setBytecode</span><span class="p">(</span><span class="n">bytecode</span><span class="p">)</span></div>

<div class="viewcode-block" id="T2CharString.needsDecompilation"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.needsDecompilation">[docs]</a>	<span class="k">def</span> <span class="nf">needsDecompilation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="T2CharString.setProgram"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.setProgram">[docs]</a>	<span class="k">def</span> <span class="nf">setProgram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">program</span> <span class="o">=</span> <span class="n">program</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="T2CharString.setBytecode"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.setBytecode">[docs]</a>	<span class="k">def</span> <span class="nf">setBytecode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytecode</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span> <span class="o">=</span> <span class="n">bytecode</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">program</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="T2CharString.getToken"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.getToken">[docs]</a>	<span class="k">def</span> <span class="nf">getToken</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span>
			<span class="nb">len</span><span class="o">=</span><span class="nb">len</span><span class="p">,</span> <span class="n">byteord</span><span class="o">=</span><span class="n">byteord</span><span class="p">,</span> <span class="n">basestring</span><span class="o">=</span><span class="n">basestring</span><span class="p">,</span>
			<span class="nb">isinstance</span><span class="o">=</span><span class="nb">isinstance</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span><span class="p">):</span>
				<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
			<span class="n">b0</span> <span class="o">=</span> <span class="n">byteord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
			<span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
			<span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operandEncoding</span><span class="p">[</span><span class="n">b0</span><span class="p">]</span>
			<span class="n">token</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">program</span><span class="p">):</span>
				<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
			<span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">program</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
			<span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
		<span class="n">isOperator</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">basestring</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">token</span><span class="p">,</span> <span class="n">isOperator</span><span class="p">,</span> <span class="n">index</span></div>

<div class="viewcode-block" id="T2CharString.getBytes"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.getBytes">[docs]</a>	<span class="k">def</span> <span class="nf">getBytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">nBytes</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">newIndex</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="n">nBytes</span>
			<span class="nb">bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span><span class="p">[</span><span class="n">index</span><span class="p">:</span><span class="n">newIndex</span><span class="p">]</span>
			<span class="n">index</span> <span class="o">=</span> <span class="n">newIndex</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="nb">bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">program</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
			<span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
		<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">bytes</span><span class="p">)</span> <span class="o">==</span> <span class="n">nBytes</span>
		<span class="k">return</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">index</span></div>

<div class="viewcode-block" id="T2CharString.handle_operator"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.handle_operator">[docs]</a>	<span class="k">def</span> <span class="nf">handle_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">operator</span></div>

<div class="viewcode-block" id="T2CharString.toXML"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.toXML">[docs]</a>	<span class="k">def</span> <span class="nf">toXML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xmlWriter</span><span class="p">,</span> <span class="n">ttFont</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
		<span class="kn">from</span> <span class="nn">fontTools.misc.textTools</span> <span class="k">import</span> <span class="n">num2binary</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">xmlWriter</span><span class="o">.</span><span class="n">dumphex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
			<span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
			<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
				<span class="n">token</span><span class="p">,</span> <span class="n">isOperator</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getToken</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
					<span class="k">break</span>
				<span class="k">if</span> <span class="n">isOperator</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">token</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;hintmask&#39;</span><span class="p">,</span> <span class="s1">&#39;cntrmask&#39;</span><span class="p">):</span>
						<span class="n">hintMask</span><span class="p">,</span> <span class="n">isOperator</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getToken</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
						<span class="n">bits</span> <span class="o">=</span> <span class="p">[]</span>
						<span class="k">for</span> <span class="n">byte</span> <span class="ow">in</span> <span class="n">hintMask</span><span class="p">:</span>
							<span class="n">bits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num2binary</span><span class="p">(</span><span class="n">byteord</span><span class="p">(</span><span class="n">byte</span><span class="p">),</span> <span class="mi">8</span><span class="p">))</span>
						<span class="n">hintMask</span> <span class="o">=</span> <span class="n">strjoin</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span>
						<span class="n">line</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="p">[</span><span class="n">token</span><span class="p">,</span> <span class="n">hintMask</span><span class="p">])</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">line</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="p">[</span><span class="n">token</span><span class="p">])</span>
					<span class="n">xmlWriter</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
					<span class="n">xmlWriter</span><span class="o">.</span><span class="n">newline</span><span class="p">()</span>
					<span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
						<span class="n">token</span> <span class="o">=</span> <span class="n">floatToFixedToStr</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">precisionBits</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
					<span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">args</span><span class="p">:</span>
				<span class="c1"># NOTE: only CFF2 charstrings/subrs can have numeric arguments on</span>
				<span class="c1"># the stack after the last operator. Compiling this would fail if</span>
				<span class="c1"># this is part of CFF 1.0 table.</span>
				<span class="n">line</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
				<span class="n">xmlWriter</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span></div>

<div class="viewcode-block" id="T2CharString.fromXML"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T2CharString.fromXML">[docs]</a>	<span class="k">def</span> <span class="nf">fromXML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
		<span class="kn">from</span> <span class="nn">fontTools.misc.textTools</span> <span class="k">import</span> <span class="n">binary2num</span><span class="p">,</span> <span class="n">readHex</span>
		<span class="k">if</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;raw&quot;</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">setBytecode</span><span class="p">(</span><span class="n">readHex</span><span class="p">(</span><span class="n">content</span><span class="p">))</span>
			<span class="k">return</span>
		<span class="n">content</span> <span class="o">=</span> <span class="n">strjoin</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
		<span class="n">content</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
		<span class="n">program</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">:</span>
			<span class="n">token</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
			<span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">token</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">token</span> <span class="o">=</span> <span class="n">strToFixedToFloat</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">precisionBits</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
				<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
					<span class="n">program</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">token</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;hintmask&#39;</span><span class="p">,</span> <span class="s1">&#39;cntrmask&#39;</span><span class="p">):</span>
						<span class="n">mask</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
						<span class="n">maskBytes</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
						<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">mask</span><span class="p">),</span> <span class="mi">8</span><span class="p">):</span>
							<span class="n">maskBytes</span> <span class="o">=</span> <span class="n">maskBytes</span> <span class="o">+</span> <span class="n">bytechr</span><span class="p">(</span><span class="n">binary2num</span><span class="p">(</span><span class="n">mask</span><span class="p">[</span><span class="n">j</span><span class="p">:</span><span class="n">j</span><span class="o">+</span><span class="mi">8</span><span class="p">]))</span>
						<span class="n">program</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">maskBytes</span><span class="p">)</span>
						<span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">program</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">program</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setProgram</span><span class="p">(</span><span class="n">program</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="T1CharString"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1CharString">[docs]</a><span class="k">class</span> <span class="nc">T1CharString</span><span class="p">(</span><span class="n">T2CharString</span><span class="p">):</span>

	<span class="n">operandEncoding</span> <span class="o">=</span> <span class="n">t1OperandEncoding</span>
	<span class="n">operators</span><span class="p">,</span> <span class="n">opcodes</span> <span class="o">=</span> <span class="n">buildOperatorDict</span><span class="p">(</span><span class="n">t1Operators</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytecode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">program</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">subrs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">program</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">program</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span> <span class="o">=</span> <span class="n">bytecode</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">program</span> <span class="o">=</span> <span class="n">program</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">subrs</span> <span class="o">=</span> <span class="n">subrs</span>

<div class="viewcode-block" id="T1CharString.getIntEncoder"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1CharString.getIntEncoder">[docs]</a>	<span class="k">def</span> <span class="nf">getIntEncoder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">encodeIntT1</span></div>

<div class="viewcode-block" id="T1CharString.getFixedEncoder"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1CharString.getFixedEncoder">[docs]</a>	<span class="k">def</span> <span class="nf">getFixedEncoder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">def</span> <span class="nf">encodeFixed</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Type 1 charstrings don&#39;t support floating point operands&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="T1CharString.decompile"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1CharString.decompile">[docs]</a>	<span class="k">def</span> <span class="nf">decompile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytecode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">return</span>
		<span class="n">program</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
			<span class="n">token</span><span class="p">,</span> <span class="n">isOperator</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getToken</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
				<span class="k">break</span>
			<span class="n">program</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setProgram</span><span class="p">(</span><span class="n">program</span><span class="p">)</span></div>

<div class="viewcode-block" id="T1CharString.draw"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.T1CharString.draw">[docs]</a>	<span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pen</span><span class="p">):</span>
		<span class="n">extractor</span> <span class="o">=</span> <span class="n">T1OutlineExtractor</span><span class="p">(</span><span class="n">pen</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subrs</span><span class="p">)</span>
		<span class="n">extractor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">extractor</span><span class="o">.</span><span class="n">width</span></div></div>

<div class="viewcode-block" id="DictDecompiler"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler">[docs]</a><span class="k">class</span> <span class="nc">DictDecompiler</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="n">operandEncoding</span> <span class="o">=</span> <span class="n">cffDictOperandEncoding</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">strings</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">strings</span> <span class="o">=</span> <span class="n">strings</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">dict</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>

<div class="viewcode-block" id="DictDecompiler.getDict"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler.getDict">[docs]</a>	<span class="k">def</span> <span class="nf">getDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;non-empty stack&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span></div>

<div class="viewcode-block" id="DictDecompiler.decompile"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler.decompile">[docs]</a>	<span class="k">def</span> <span class="nf">decompile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
		<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">lenData</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
		<span class="n">push</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span>
		<span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">lenData</span><span class="p">:</span>
			<span class="n">b0</span> <span class="o">=</span> <span class="n">byteord</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
			<span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
			<span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operandEncoding</span><span class="p">[</span><span class="n">b0</span><span class="p">]</span>
			<span class="n">value</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
				<span class="n">push</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>
<div class="viewcode-block" id="DictDecompiler.pop"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler.pop">[docs]</a>	<span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
		<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
		<span class="k">return</span> <span class="n">value</span></div>

<div class="viewcode-block" id="DictDecompiler.popall"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler.popall">[docs]</a>	<span class="k">def</span> <span class="nf">popall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[:]</span>
		<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[:]</span>
		<span class="k">return</span> <span class="n">args</span></div>

<div class="viewcode-block" id="DictDecompiler.handle_operator"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler.handle_operator">[docs]</a>	<span class="k">def</span> <span class="nf">handle_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
		<span class="n">operator</span><span class="p">,</span> <span class="n">argType</span> <span class="o">=</span> <span class="n">operator</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argType</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
			<span class="n">value</span> <span class="o">=</span> <span class="p">()</span>
			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">argType</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
				<span class="n">arg</span> <span class="o">=</span> <span class="n">argType</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
				<span class="n">arghandler</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;arg_&quot;</span> <span class="o">+</span> <span class="n">arg</span><span class="p">)</span>
				<span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">arghandler</span><span class="p">(</span><span class="n">operator</span><span class="p">),)</span> <span class="o">+</span> <span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">arghandler</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;arg_&quot;</span> <span class="o">+</span> <span class="n">argType</span><span class="p">)</span>
			<span class="n">value</span> <span class="o">=</span> <span class="n">arghandler</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;blend&quot;</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">[</span><span class="n">operator</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div>

<div class="viewcode-block" id="DictDecompiler.arg_number"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler.arg_number">[docs]</a>	<span class="k">def</span> <span class="nf">arg_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
			<span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arg_blend_number</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="k">return</span> <span class="n">out</span></div>

<div class="viewcode-block" id="DictDecompiler.arg_blend_number"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler.arg_blend_number">[docs]</a>	<span class="k">def</span> <span class="nf">arg_blend_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">blendArgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">numMasters</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">blendArgs</span><span class="p">)</span>
		<span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">blendArgs</span><span class="p">)</span>
		<span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;blend&quot;</span><span class="p">)</span>
		<span class="n">dummy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="k">return</span> <span class="n">blendArgs</span></div>

<div class="viewcode-block" id="DictDecompiler.arg_SID"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler.arg_SID">[docs]</a>	<span class="k">def</span> <span class="nf">arg_SID</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">strings</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()]</span></div>
<div class="viewcode-block" id="DictDecompiler.arg_array"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler.arg_array">[docs]</a>	<span class="k">def</span> <span class="nf">arg_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span></div>
<div class="viewcode-block" id="DictDecompiler.arg_blendList"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler.arg_blendList">[docs]</a>	<span class="k">def</span> <span class="nf">arg_blendList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		There may be non-blend args at the top of the stack. We first calculate</span>
<span class="sd">		where the blend args start in the stack. These are the last</span>
<span class="sd">		numMasters*numBlends) +1 args.</span>
<span class="sd">		The blend args starts with numMasters relative coordinate values, the  BlueValues in the list from the default master font. This is followed by</span>
<span class="sd">		numBlends list of values. Each of  value in one of these lists is the</span>
<span class="sd">		Variable Font delta for the matching region.</span>

<span class="sd">		We re-arrange this to be a list of numMaster entries. Each entry starts with the corresponding default font relative value, and is followed by</span>
<span class="sd">		the delta values. We then convert the default values, the first item in each entry, to an absolute value.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">vsindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vsindex&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">numMasters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">getNumRegions</span><span class="p">(</span><span class="n">vsindex</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="c1"># only a PrivateDict has blended ops.</span>
		<span class="n">numBlends</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
		<span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="n">numArgs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
		<span class="c1"># The spec says that there should be no non-blended Blue Values,.</span>
		<span class="k">assert</span><span class="p">(</span><span class="n">numArgs</span> <span class="o">==</span> <span class="n">numMasters</span> <span class="o">*</span> <span class="n">numBlends</span><span class="p">)</span>
		<span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span><span class="o">*</span><span class="n">numBlends</span>
		<span class="n">numDeltas</span> <span class="o">=</span> <span class="n">numMasters</span><span class="o">-</span><span class="mi">1</span>
		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">prevVal</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numBlends</span><span class="p">:</span>
			<span class="n">newVal</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">prevVal</span>
			<span class="n">prevVal</span> <span class="o">=</span> <span class="n">newVal</span>
			<span class="n">masterOffset</span> <span class="o">=</span> <span class="n">numBlends</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">*</span> <span class="n">numDeltas</span><span class="p">)</span>
			<span class="n">blendList</span> <span class="o">=</span> <span class="p">[</span><span class="n">newVal</span><span class="p">]</span> <span class="o">+</span> <span class="n">args</span><span class="p">[</span><span class="n">masterOffset</span><span class="p">:</span><span class="n">masterOffset</span><span class="o">+</span><span class="n">numDeltas</span><span class="p">]</span>
			<span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">blendList</span>
			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
		<span class="k">return</span> <span class="n">value</span></div>

<div class="viewcode-block" id="DictDecompiler.arg_delta"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.DictDecompiler.arg_delta">[docs]</a>	<span class="k">def</span> <span class="nf">arg_delta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="n">valueList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popall</span><span class="p">()</span>
		<span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">if</span> <span class="n">valueList</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">valueList</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
			<span class="c1"># arg_blendList() has already converted these to absolute values.</span>
			<span class="n">out</span> <span class="o">=</span> <span class="n">valueList</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">current</span> <span class="o">=</span> <span class="mi">0</span>
			<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">valueList</span><span class="p">:</span>
				<span class="n">current</span> <span class="o">=</span> <span class="n">current</span> <span class="o">+</span> <span class="n">v</span>
				<span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">out</span></div></div>


<div class="viewcode-block" id="calcSubrBias"><a class="viewcode-back" href="../../../misc/psCharStrings.html#fontTools.misc.psCharStrings.calcSubrBias">[docs]</a><span class="k">def</span> <span class="nf">calcSubrBias</span><span class="p">(</span><span class="n">subrs</span><span class="p">):</span>
	<span class="n">nSubrs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">subrs</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">nSubrs</span> <span class="o">&lt;</span> <span class="mi">1240</span><span class="p">:</span>
		<span class="n">bias</span> <span class="o">=</span> <span class="mi">107</span>
	<span class="k">elif</span> <span class="n">nSubrs</span> <span class="o">&lt;</span> <span class="mi">33900</span><span class="p">:</span>
		<span class="n">bias</span> <span class="o">=</span> <span class="mi">1131</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">bias</span> <span class="o">=</span> <span class="mi">32768</span>
	<span class="k">return</span> <span class="n">bias</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Just van Rossum, Behdad Esfahbod, and the fontTools Authors. CC BY-SA 4.0

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>